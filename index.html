<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Commande – RoulTamo</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  body{font-family:Arial, Helvetica, sans-serif;background:#f2f4f7;padding:20px;}
  .box{max-width:600px;margin:auto;background:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 10px rgba(0,0,0,.08);}
  h2{margin-bottom:10px;}
  label{display:block;margin-top:15px;font-size:14px;}
  select,input{width:100%;padding:10px;margin-top:5px;border:1px solid #ccc;border-radius:4px;font-size:14px;}
  .btn{margin-top:20px;width:100%;padding:14px;background:#25D366;color:#fff;border:none;border-radius:6px;font-size:16px;font-weight:bold;cursor:pointer;}
</style>
</head>
<body>

<div class="box">
  <h2>Commande / الطلب</h2>

  <label>Nom complet *</label>
  <input id="nom" placeholder="Votre nom complet" required>

  <label>Produit *</label>
  <select id="produit" required>
    <option value="">Choisir un produit</option>
    <option value="Produit A" data-prix="1000">Produit A – 1000 DA</option>
    <option value="Produit B" data-prix="1500">Produit B – 1500 DA</option>
    <option value="Produit C" data-prix="2000">Produit C – 2000 DA</option>
  </select>

  <label>Numéro de téléphone *</label>
  <input id="tel" placeholder="05xxxxxxxx" required>

  <label>Wilaya *</label>
  <select id="wilaya" required>
    <option value="">Choisir</option>
    <option>Adrar</option>
    <option>Chlef</option>
    <option>Laghouat</option>
    <option>Oum El Bouaghi</option>
    <option>Batna</option>
    <option>Béjaïa</option>
    <option>Biskra</option>
    <option>Béchar</option>
    <option>Blida</option>
    <option>Bouira</option>
    <option>Tamanrasset</option>
    <option>Tébessa</option>
    <option>Tlemcen</option>
    <option>Tiaret</option>
    <option>Tizi Ouzou</option>
    <option>Alger</option>
    <option>Djelfa</option>
    <option>Jijel</option>
    <option>Sétif</option>
    <option>Saïda</option>
    <option>Skikda</option>
    <option>Sidi Bel Abbès</option>
    <option>Annaba</option>
    <option>Guelma</option>
    <option>Constantine</option>
    <option>Médéa</option>
    <option>Mostaganem</option>
    <option>M'Sila</option>
    <option>Mascara</option>
    <option>Ouargla</option>
    <option>Oran</option>
    <option>El Bayadh</option>
    <option>Illizi</option>
    <option>Bordj Bou Arreridj</option>
    <option>Boumerdès</option>
    <option>El Tarf</option>
    <option>Tindouf</option>
    <option>Tissemsilt</option>
    <option>El Oued</option>
    <option>Khenchela</option>
    <option>Souk Ahras</option>
    <option>Tipaza</option>
    <option>Mila</option>
    <option>Aïn Defla</option>
    <option>Naâma</option>
    <option>Aïn Témouchent</option>
    <option>Ghardaïa</option>
    <option>Relizane</option>
    <option>Timimoun</option>
    <option>Bordj Badji Mokhtar</option>
    <option>Ouled Djellal</option>
    <option>Béni Abbès</option>
    <option>In Salah</option>
    <option>In Guezzam</option>
    <option>Touggourt</option>
    <option>Djanet</option>
    <option>El M'Ghair</option>
    <option>El Meniaa</option>
  </select>

  <label>Quantité *</label>
  <select id="qte" required>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
  </select>

  <button class="btn" onclick="sendOrder()">Confirmer</button>
</div>

<script>
function sendOrder(){
  const nom = document.getElementById('nom').value.trim();
  const produitSelect = document.getElementById('produit');
  const produit = produitSelect.value;
  const tel = document.getElementById('tel').value.trim();
  const wilaya = document.getElementById('wilaya').value;
  const qte = parseInt(document.getElementById('qte').value);

  if(!nom || !produit || !tel || !wilaya || !qte){
    alert("⚠️ Veuillez remplir tous les champs obligatoires !");
    return;
  }

  // Récupérer le prix automatiquement depuis l'option sélectionnée
  const prixUnitaire = parseInt(produitSelect.selectedOptions[0].dataset.prix);
  const prix = qte * prixUnitaire;

  // URL Web App Google Sheet
  const urlSheet = "https://script.google.com/macros/s/AKfycbxHFgziMVCSWXUNlOvo2AL4FUJWoHs8NKGMDlVAGuAErlek-4Jg4fvBI4UGBPktBmIuPQ/exec"; // remplace par ton lien

  fetch(`${urlSheet}?nom=${encodeURIComponent(nom)}&produit=${encodeURIComponent(produit)}&tel=${encodeURIComponent(tel)}&wilaya=${encodeURIComponent(wilaya)}&qte=${qte}&prix=${prix}`)
    .then(response => response.text())
    .then(data => {
      alert("✅ Commande envoyée !");
      // Reset formulaire
      document.getElementById('nom').value = "";
      document.getElementById('produit').selectedIndex = 0;
      document.getElementById('tel').value = "";
      document.getElementById('wilaya').selectedIndex = 0;
      document.getElementById('qte').selectedIndex = 0;
    })
    .catch(err => alert("Erreur: " + err));
}
</script>

</body>
</html>
